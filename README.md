# Регистры

| Регистр     | Адрес      | Размер | Доступ | Описание                                                                                                                                   | Значение по сбросу |
| ----------- | ---------- | ------ | ------ | ------------------------------------------------------------------------------------------------------------------------------------------ | ------------------ |
| INSTR       | 0x00       | 8      | RW     | ID инструкции (первый байт при отправке команды по SPI)                                                                                    | 0x00               |
| BYTES[0..4] | 0x01..0x05 | 40     | RW     | Остальные байты инструкции                                                                                                                 | 0x00 для всех      |
| BYTES_CNT   | 0x06       | 8      | RW     | Количество используемых байт из регистра BYTES для отправки инструкции                                                                     | 0x00               |
| DRIVE       | 0x07       | 8      | RW     | Регистр начала транзакции SPI. После загрузки данных в остальные регистры, запись значения 0xFF в этот регистр запускает транзакцию по SPI | 0x00               |
| STR         | 0x08       | 8      | R      | Статусный регистр транзакции                                                                                                               | 0x00               |

![изображение](https://github.com/user-attachments/assets/9fe25f8b-1d89-42ab-a406-bcbee7395c69)

## Статусный регистр STR

![изображение](https://github.com/user-attachments/assets/32b9336f-011c-4d64-b3a0-4165d3e89f9b)

# Описание контроллера

Блок контроллера имеет входной интерфейс APB3 и выходной интерфейс SPI.

![Контроллер памяти drawio](https://github.com/user-attachments/assets/ca1d7629-6eb8-4854-85bb-cc82c061f143)

Передача инструкции осуществляется путем заполнения регистров данными инструкции и сохранением `0xFF` в регистр `DRIVE`.
![wavedrom(6)](https://github.com/user-attachments/assets/6442a17f-cd36-4c99-941d-8b37e6ff737f)

# Используемое ПО

**QuestaSim Starter Edition**
